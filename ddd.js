function y(o){window.enmity.plugins.registerPlugin(o)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const s=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function S(o){return window.enmity.patcher.create(o)}var a="Startup Sound",h="1.0.0",p="Plays a sound on startup.",F=[{name:"Tiny Games",id:"483056015890186263"}],v={name:a,version:h,description:p,authors:F};const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const T=e.FormRow;e.FormSection,e.FormSelect,e.FormSubLabel;const b=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var f=({settings:o})=>s.createElement(T,{label:"Example Setting",trailing:s.createElement(b,{value:o.get("example",!0),onValueChange:()=>o.toggle("example",!0)})});function c(...o){return window.enmity.modules.getByProps(...o)}window.enmity.modules.common;function u(o,m,n){return window.enmity.settings.get(o,m,n)}const g=S("ShowUserName"),C=c("View"),N=c("getUser"),{DCDChatManager:x}=C.NativeModules,M={...v,onStart(){function o(m){let n=N.getUser(m.authorId);if(!n)return m;let i=n.discriminator==="0"?n.username:n.tag;return n.globalName&&u(a,"display",!0)&&(i+=` - ${n.globalName}`),u(a,"replace",!1)?m.username=i:m.username+=` (${i})`,m}g.before(x,"updateRows",(m,n,i)=>{var r,d,l;const w=JSON.parse(n[1]);for(const t of w)t.type!==1||!((r=t.message)!=null&&r.authorId)||!((d=t.message)!=null&&d.username)||(t.message=o(t.message),(l=t.message.referencedMessage)!=null&&l.message&&(t.message.referencedMessage.message=o(t.message.referencedMessage.message)));n[1]=JSON.stringify(w)})},onStop(){g.unpatchAll()},getSettingsPanel({settings:o}){return s.createElement(f,{settings:o})}};y(M);